; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
default_envs = esp32doit-devkit-v1_Debug

[common]
lib_deps = 
	arduino-libraries/ArduinoBLE@^1.4.0

build_flags =
	-w ; disabling all the warnings (to prevent warnings from libraries)
	-fdiagnostics-color=always
	-I include
	-std=c++11

build_src_flags = 
	-Wall
	-Wextra 
	-Wconversion 
	-pedantic

[esp32doit-devkit-v1]
platform = https://github.com/pioarduino/platform-espressif32/releases/download/stable/platform-espressif32.zip
framework = arduino
board = esp32doit-devkit-v1
upload_speed = 115200

monitor_speed = 115200
monitor_rts = 0
monitor_dtr = 0
monitor_filters = esp32_exception_decoder

board_build.partitions = min_spiffs.csv	

build_flags =
	${common.build_flags}

[env:esp32doit-devkit-v1_Debug]
extends = common, esp32doit-devkit-v1
build_type = debug
build_flags = 
	${esp32doit-devkit-v1.build_flags}
	-Og
	'-D LOG'
	'-D LOG_INFOS'
	'-D LOG_WARNINGS'
	'-D LOG_ERRORS'
	 
[env:esp32doit-devkit-v1_Release]
extends = common, esp32doit-devkit-v1
build_type = release
build_flags = 
	${esp32doit-devkit-v1.build_flags}
 	-Os
	-ffunction-sections
    -fdata-sections
    -Wl,--gc-sections
	'-D LOG'
	'-D LOG_ERRORS'

build_src_flags = 
	${common.build_src_flags}
	-Werror
